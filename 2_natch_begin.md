
# 2. Основы работы с Natch

Инструмент *Natch* для определения поверхности атаки отслеживает потоки данных с помощью пометок.
Обнаруженные участки кода средствами интроспекции соотносятся с программными модулями и функциями.

*Natch* представляет собой набор плагинов для Qemu, которые инструментируют
выполняемый код и существенно замедляют работу эмулятора.
В связи с этим, анализ предлагается проводить с использованием детерминированного воспроизведения.
Детерминированное воспроизведение - это технология, которая позволяет записывать, а затем многократно воспроизводить и анализировать
сценарий работы виртуальной машины.
В нашем случае на записанный сценарий уже не будут оказывать влияния задержки от плагинов анализа,
что очень важно для корректной работы часов реального времени и при взаимодействии с сетью.

Примерный алгоритм получения поверхности атаки может выглядеть следующим образом:

*  Запуск Qemu с плагином *natch*
*  Ожидание загрузки до интересующего момента
*  Включение анализа помеченных данных (если он не был включен автоматически через конфигурационный файл)
*  Выполнение тестового сценария
*  Загрузка полученных данных в веб-интерфейс
*  Анализ и оценка результатов

